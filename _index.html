<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>App de Persianas</title>

	<!-- Bootstrap -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

	<style>
		:root {
			--color-verde: #1CC26B;
		}

		.bottom-nav {
			position: fixed;
			bottom: 0;
			left: 0;
			width: 100%;
			background: #fff;
			border-top: 1px solid #e2e2e2;
			z-index: 1000;
		}

		.bottom-nav .nav-link {
			color: #7c7c7c;
			padding: 10px 0;
			font-size: 14px;
		}

		.bottom-nav .nav-link.active {
			color: var(--color-verde);
			font-weight: 600;
		}

		.screen {
			padding-bottom: 80px;
		}

		#cotizacion, #cotizador {
			padding-bottom: 130px !important;
		}

		.btn-primary, .bg-primary, .text-primary {
			background-color: var(--color-verde) !important;
			border-color: var(--color-verde) !important;
		}
		.text-primary {
			color: var(--color-verde) !important;
		}

		/* Tabla scroll */
		.table-responsive {
			overflow-x: auto;
			-webkit-overflow-scrolling: touch;
		}
	</style>
</head>

<body class="bg-light">

	<!-- ========================= -->
	<!--   SECCIÓN COTIZADOR      -->
	<!-- ========================= -->

	<div id="cotizador" class="screen container py-4">
		<span class="badge px-3 py-2 mb-3" style="background-color:#1CC26B;">COTIZADOR</span>

		<h2 class="fw-bold mb-4">Nueva cotización</h2>

		<div class="card border-0 shadow-sm mb-4">
			<div class="card-body">

				<!-- Descripción -->
				<div class="mb-3">
					<label class="form-label fw-bold">Descripción</label>
					<input type="text" 
					class="form-control"
					id="desc"
					placeholder="Ejemplo: Ventana de sala, puerta balcón...">
				</div>

				<!-- Ancho / Alto -->
				<div class="row">
					<div class="col-6 mb-3">
						<label class="form-label fw-bold">Ancho (cm)</label>
						<input type="number" 
						class="form-control"
						id="ancho"
						placeholder="Ancho de la ventana">
					</div>

					<div class="col-6 mb-3">
						<label class="form-label fw-bold">Alto (cm)</label>
						<input type="number" 
						class="form-control"
						id="alto"
						placeholder="Alto de la ventana">
					</div>
				</div>

				<!-- Modelos -->
				<label class="form-label fw-bold mt-2 mb-2">Modelo</label>

				<div class="card border-0 shadow-sm p-3">
					<div class="row">

						<div class="col-6 mb-2">
							<input class="form-check-input" type="checkbox" id="basico">
							<label class="form-check-label" for="basico">Básico</label>
						</div>

						<div class="col-6 mb-2">
							<input class="form-check-input" type="checkbox" id="intermedio">
							<label class="form-check-label" for="intermedio">Intermedio</label>
						</div>

						<div class="col-6 mb-2">
							<input class="form-check-input" type="checkbox" id="premium">
							<label class="form-check-label" for="premium">Mejor calidad</label>
						</div>

						<div class="col-6 mb-2">
							<input class="form-check-input" type="checkbox" id="semiBlackout">
							<label class="form-check-label" for="semiBlackout">Semiblackout</label>
						</div>

						<div class="col-6 mb-2">
							<input class="form-check-input" type="checkbox" id="blackout">
							<label class="form-check-label" for="blackout">Blackout</label>
						</div>

						<div class="col-6 mb-2">
							<input class="form-check-input" type="checkbox" id="enrollable">
							<label class="form-check-label" for="enrollable">Enrollable</label>
						</div>

					</div>
				</div>

				<!-- Botón agregar -->
				<div class="d-grid mt-4">
					<button id="btnAgregar" class="btn btn-primary py-2">
						Agregar a la tabla
					</button>
				</div>

			</div>
		</div>

		<!-- Tabla -->
		<h4 class="fw-bold mb-3">Medidas agregadas</h4>

		<div class="card border-0 shadow-sm">
			<div class="card-body p-0 table-responsive">

				<table class="table mb-0">
					<thead>
						<tr>
							<th>Descripción</th>
							<th>Medidas</th>
							<th>Modelo</th>
							<th class="text-end">Precio</th>
						</tr>
					</thead>

					<tbody id="tabla-medidas">
						<tr>
							<td colspan="4" class="text-center text-muted py-4">
								Aún no agregas ninguna medida
							</td>
						</tr>
					</tbody>

				</table>

			</div>
		</div>

	</div>


	<!-- ========================= -->
	<!--   SECCIÓN COTIZACIÓN      -->
	<!-- ========================= -->

	<div id="cotizacion" class="screen container py-4 d-none">
		<span class="badge px-3 py-2 mb-2" style="background-color:#1CC26B;">COTIZACIÓN</span>

		<h2 class="fw-bold mb-1">Cotización #6840</h2>
		<p class="text-muted">Fecha: 17 de noviembre de 2025</p>

		<!-- Tabla -->
		<div class="card border-0 shadow-sm mb-4">
			<div class="card-body p-0">
				<table class="table mb-0">
					<thead>
						<tr>
							<th>Descripción</th>
							<th class="text-end">Precio</th>
						</tr>
					</thead>
					<tbody id="tabla-final"></tbody>
					<tfoot>
						<tr>
							<th>Total</th>
							<th id="total-final" class="text-end text-success">$0.00</th>
						</tr>
					</tfoot>
				</table>
			</div>
		</div>

		<h5 class="fw-bold mb-3">Galería de Imágenes</h5>

		<div class="row g-3 mb-4">
			<div class="col-6"><img src="catalogo/basica1.jpg" class="img-fluid rounded shadow-sm"></div>
			<div class="col-6"><img src="catalogo/alta1.png" class="img-fluid rounded shadow-sm"></div>
			<div class="col-6"><img src="catalogo/alta2.png" class="img-fluid rounded shadow-sm"></div>
			<div class="col-6"><img src="catalogo/alta3.png" class="img-fluid rounded shadow-sm"></div>
		</div>

		<!-- Información -->
		<div class="card border-0 shadow-sm mb-4">
			<div class="card-body d-flex">
				<div style="width:5px; background:#1CC26B; border-radius:10px; margin-right:15px;"></div>
				<div>
					<h6 class="fw-bold mb-3">Información Importante</h6>
					<p class="mb-3">
						Instalación sin costo de <b>3 a 6 días hábiles</b>, se requiere el
						<b>50% de anticipo</b> y el resto al instalar.
					</p>

					<h6 class="fw-bold mb-2">Métodos de pago:</h6>
					<p class="mb-1">✔ Efectivo</p>
					<p class="mb-1">✔ Transferencia</p>
					<p>✔ Pago con tarjeta</p>
				</div>
			</div>
		</div>

		<div class="d-grid gap-2">
			<button class="btn btn-primary py-2">Imprimir Cotización</button>
			<button class="btn btn-outline-secondary py-2">Compartir</button>
		</div>
	</div>

	<!-- ========================= -->
	<!--   SECCIÓN CATÁLOGO      -->
	<!-- ========================= -->
	<div id="catalogo" class="screen container py-4 d-none">
		<span class="badge px-3 py-2 mb-3" style="background-color:#1CC26B;">CATÁLOGO</span>
        <h3 class="fw-bold">Catálogo</h3>
        <p>Sección para subir fotos de tus persianas.</p>
    </div>


	<!-- ========================= -->
	<!--     BOTONERA INFERIOR     -->
	<!-- ========================= -->
	<nav class="bottom-nav">
		<div class="container-fluid">
			<div class="row text-center">

				<div class="col">
					<a class="nav-link active" href="#" data-target="cotizador">
						<i class="bi bi-calculator"></i><br>
						Cotizador
					</a>
				</div>

				<div class="col">
					<a class="nav-link" href="#" data-target="cotizacion">
						<i class="bi bi-file-earmark-text"></i><br>
						Cotización
					</a>
				</div>

				<div class="col">
					<a class="nav-link" href="#" data-target="catalogo">
						<i class="bi bi-images"></i><br>
						Catálogo
					</a>
				</div>

			</div>
		</div>
	</nav>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

	<script>

/* ============================
   NAVEGACIÓN ENTRE PANTALLAS
=============================== */
		const links = document.querySelectorAll(".bottom-nav .nav-link");
		const screens = document.querySelectorAll(".screen");

		links.forEach(link => {
			link.addEventListener("click", (e) => {
				e.preventDefault();
				links.forEach(l => l.classList.remove("active"));
				link.classList.add("active");

				const target = link.dataset.target;
				screens.forEach(s => s.classList.add("d-none"));
				document.getElementById(target).classList.remove("d-none");
			});
		});

/* ============================
   PRECIOS POR MODELO (m²)
=============================== */
		const precios = {
			basico: 599,
			intermedio: 850,
			premium: 950,
			semiBlackout: 1250,
			blackout: 1450,
			enrollableBase: 700,
			enrollableExtra: 440
		};

/* ============================
   COLORES BADGE
=============================== */
		const colores = {
			basico: "#1CC26B",
			intermedio: "#0D6EFD",
			premium: "#6F42C1",
			semiBlackout: "#FFC107",
			blackout: "#DC3545",
			enrollable: "#198754"
		};

		const nombres = {
			basico: "Básico",
			intermedio: "Intermedio",
			premium: "Mejor calidad",
			semiBlackout: "Semiblackout",
			blackout: "Blackout",
			enrollable: "Enrollable"
		};

/* ============================
   CAPTURA DE CAMPOS
=============================== */
		const descInput = document.getElementById("desc");
		const anchoInput = document.getElementById("ancho");
		const altoInput = document.getElementById("alto");
		const tabla = document.getElementById("tabla-medidas");

/* ============================
   AGREGAR A TABLA
=============================== */
		document.getElementById("btnAgregar").addEventListener("click", () => {

			const desc = descInput.value.trim();
			const ancho = parseFloat(anchoInput.value);
			const alto = parseFloat(altoInput.value);

			if (!desc || !ancho || !alto) {
				alert("Llena todos los campos");
				return;
			}

			let modelos = [];
			["basico","intermedio","premium","semiBlackout","blackout","enrollable"].forEach(id=>{
				if(document.getElementById(id).checked) modelos.push(id);
			});

			if (modelos.length === 0){
				alert("Selecciona al menos un modelo");
				return;
			}

	// Limpia la tabla si estaba vacía
			if (tabla.children.length === 1 && tabla.children[0].children[0].colSpan === 4) {
				tabla.innerHTML = "";
			}

			modelos.forEach(modelo => {

		let m2 = (ancho) * (alto); // metros EXACTOS
		let precio = 0;

		if (modelo !== "enrollable") {
			precio = m2 * precios[modelo];
		} else {
			precio = precios.enrollableBase + ((ancho) * precios.enrollableExtra);
		}

		// Redondeo SIEMPRE hacia arriba
		precio = Math.ceil(precio) + ".00";

		let tr = document.createElement("tr");
		tr.innerHTML = `
			<td>${desc}</td>
			<td>${(ancho).toFixed(2)}X${(alto).toFixed(2)}</td>
			<td><span class="badge" style="background:${colores[modelo]};">${nombres[modelo]}</span></td>
			<td class="text-end">$${precio}</td>
		`;

		tabla.appendChild(tr);
	});

			descInput.value = "";
			anchoInput.value = "";
			altoInput.value = "";
			document.querySelectorAll(".form-check-input").forEach(i=>i.checked=false);
		});

	</script>

</body>
</html>